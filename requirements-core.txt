# ============================================================================
# NON-NEGOTIABLE CORE DEPENDENCIES
# ============================================================================
# These versions are locked and tested together for Python 3.11.9 compatibility
# DO NOT CHANGE without testing the entire dependency chain
# ============================================================================

# Python 3.11.9 Required
# faiss-cpu MUST be 1.9.0.post1 for Python 3.11 compatibility (no wheels for 1.8.0)
faiss-cpu==1.9.0.post1

# NumPy - Must be < 2.0 for faiss-cpu 1.9.0.post1 compatibility
numpy==1.26.4

# PyTorch ecosystem - Compatible with numpy 1.26.4
torch==2.2.1
torchvision==0.17.1

# Transformers - Compatible with torch 2.2.1
transformers==4.35.0
sentence-transformers==2.2.2
tokenizers==0.14.1
safetensors==0.4.0

# ChromaDB - Needs faiss-cpu and numpy
chromadb==0.4.18
chroma-hnswlib==0.7.3

# SciPy ecosystem - Compatible with numpy 1.26.4
scipy==1.16.3
scikit-learn==1.8.0
scikit-image==0.25.2
pandas==2.1.3

# Image processing - Core
Pillow==10.1.0
opencv-python-headless==4.8.1.78

# AI/ML dependencies
accelerate==0.24.0
bitsandbytes==0.41.0
einops==0.7.0
huggingface-hub==0.17.3

# ============================================================================
# WEB FRAMEWORK (Non-negotiable for web app)
# ============================================================================
Flask==3.1.2
Werkzeug==3.1.3
Flask-Login==0.6.3
Flask-Mail==0.10.0
Flask-Session==0.8.0
gunicorn==23.0.0  # Linux only, but in core for Render

# ============================================================================
# DATABASE (Non-negotiable)
# ============================================================================
psycopg2-binary==2.9.9  # PostgreSQL
SQLAlchemy==2.0.23
asyncpg==0.29.0

# ============================================================================
# AUTH & SECURITY (Non-negotiable)
# ============================================================================
bcrypt==4.1.1
cryptography==41.0.7
PyJWT==2.10.1
python-jose==3.3.0
passlib==1.7.4

# ============================================================================
# SUPABASE (Non-negotiable for OAuth)
# ============================================================================
supabase==2.10.0
supabase-auth==2.24.0
supabase-functions==2.24.0
postgrest==0.18.0
storage3==0.9.0
gotrue==2.10.0
realtime==2.25.1

# ============================================================================
# AI APIs (Non-negotiable)
# ============================================================================
anthropic==0.7.0
openai==1.3.0
google-generativeai==0.3.2
google-ai-generativelanguage==0.4.0

# ============================================================================
# ESSENTIAL UTILITIES (Non-negotiable)
# ============================================================================
python-dotenv==1.0.0
requests==2.31.0
pydantic==2.12.5
pydantic-settings==2.1.0
pydantic_core==2.41.5

# ============================================================================
# HTTP CLIENT (Non-negotiable - pinned to fix conflicts)
# ============================================================================
urllib3==2.0.7  # CRITICAL: Must be <2.0.0 for qdrant-client, <2.4.0 for kubernetes
certifi==2025.11.12
charset-normalizer==3.4.4
idna==3.11

# ============================================================================
# ASYNC & CONCURRENCY (Non-negotiable for web app)
# ============================================================================
aiohttp==3.9.1
anyio==3.7.1
asgiref==3.11.0

# ============================================================================
# TEMPLATE ENGINE (Non-negotiable for Flask)
# ============================================================================
Jinja2==3.1.6
MarkupSafe==3.0.3
click==8.1.7
itsdangerous==2.2.0

# ============================================================================
# SESSION & CACHING (Non-negotiable)
# ============================================================================
redis==5.0.1
cachelib==0.13.0

