{% extends "base.html" %}

{% block title %}Private Vault{% endblock %}

{% block content %}

<!-- Vault Header - Compact -->
<div class="vault-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h1 class="vault-title"><i class="fas fa-shield-alt"></i> Vault</h1>
            <div class="vault-subtitle">Operational Command Center</div>
        </div>
        <div class="vault-stats-compact">
            <span class="stat-chip" id="totalItems">0 items</span>
            <span class="stat-chip" id="totalValue">$0</span>
        </div>
    </div>
</div>

<!-- Global Vault Controls -->
<div class="vault-controls-bar">
    <div class="row g-2 align-items-center">
        <!-- Search -->
        <div class="col-md-4">
            <div class="input-group">
                <span class="input-group-text"><i class="fas fa-search"></i></span>
                <input type="text" class="form-control" id="globalSearch" placeholder="Search entire vault...">
            </div>
        </div>

        <!-- Filter -->
        <div class="col-md-2">
            <select class="form-select" id="globalFilter">
                <option value="">All Status</option>
                <option value="stored">Stored</option>
                <option value="draft">Draft</option>
                <option value="listed">Listed</option>
                <option value="sold">Sold</option>
                <option value="archived">Archived</option>
            </select>
        </div>

        <!-- Bulk Actions -->
        <div class="col-md-3">
            <div class="btn-group" role="group">
                <button class="btn btn-outline-secondary btn-sm" id="bulkMove" disabled>
                    <i class="fas fa-arrows-alt"></i> Move
                </button>
                <button class="btn btn-outline-secondary btn-sm" id="bulkStatus" disabled>
                    <i class="fas fa-tag"></i> Status
                </button>
                <button class="btn btn-outline-danger btn-sm" id="bulkDelete" disabled>
                    <i class="fas fa-trash"></i> Delete
                </button>
            </div>
        </div>

        <!-- Import/Export -->
        <div class="col-md-3">
            <div class="btn-group" role="group">
                <button class="btn btn-outline-primary btn-sm" onclick="showImportModal()">
                    <i class="fas fa-upload"></i> Import
                </button>
                <button class="btn btn-outline-primary btn-sm" onclick="exportVault()">
                    <i class="fas fa-download"></i> Export
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Status Legend -->
<div class="status-legend">
    <span class="status-chip status-stored">Stored</span>
    <span class="status-chip status-draft">Draft</span>
    <span class="status-chip status-listed">Listed</span>
    <span class="status-chip status-sold">Sold</span>
    <span class="status-chip status-archived">Archived</span>
</div>

<!-- Vault Tabs -->
<div class="vault-tabs">
    <div class="nav nav-tabs border-0" id="vaultTab" role="tablist">
        <button class="nav-link active vault-tab-btn" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">
            <i class="fas fa-tachometer-alt"></i> Overview
        </button>
        <button class="nav-link vault-tab-btn" id="cards-tab" data-bs-toggle="tab" data-bs-target="#cards" type="button" role="tab">
            <i class="fas fa-id-card"></i> Cards
        </button>
        <button class="nav-link vault-tab-btn" id="coins-tab" data-bs-toggle="tab" data-bs-target="#coins" type="button" role="tab">
            <i class="fas fa-coins"></i> Coins
        </button>
        <button class="nav-link vault-tab-btn disabled" id="collectibles-tab" data-bs-toggle="tab" data-bs-target="#collectibles" type="button" role="tab">
            <i class="fas fa-cubes"></i> Collectibles
        </button>
    </div>
</div>

<!-- Tab Content -->
<div class="tab-content vault-content" id="vaultTabContent">

    <!-- Overview Tab -->
    <div class="tab-pane fade show active" id="overview" role="tabpanel">
        <div class="row g-3">
            <!-- Cards Summary -->
            <div class="col-md-4">
                <div class="vault-summary-card">
                    <div class="summary-header">
                        <i class="fas fa-id-card"></i>
                        <h5>Cards</h5>
                    </div>
                    <div class="summary-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="cardsTotal">0</span>
                            <span class="stat-label">Total</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="cardsListed">0</span>
                            <span class="stat-label">Listed</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="cardsValue">$0</span>
                            <span class="stat-label">Value</span>
                        </div>
                    </div>
                    <div class="summary-actions">
                        <a href="{{ url_for('cards.vault_cards') }}" class="btn btn-primary btn-sm w-100">Manage Cards</a>
                    </div>
                </div>
            </div>

            <!-- Coins Summary -->
            <div class="col-md-4">
                <div class="vault-summary-card">
                    <div class="summary-header">
                        <i class="fas fa-coins"></i>
                        <h5>Coins</h5>
                    </div>
                    <div class="summary-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="coinsTotal">0</span>
                            <span class="stat-label">Total</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="coinsGraded">0</span>
                            <span class="stat-label">Graded</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="coinsValue">$0</span>
                            <span class="stat-label">Value</span>
                        </div>
                    </div>
                    <div class="summary-actions">
                        <a href="{{ url_for('cards.vault_coins') }}" class="btn btn-success btn-sm w-100">Manage Coins</a>
                    </div>
                </div>
            </div>

            <!-- Storage Summary -->
            <div class="col-md-4">
                <div class="vault-summary-card">
                    <div class="summary-header">
                        <i class="fas fa-warehouse"></i>
                        <h5>Storage</h5>
                    </div>
                    <div class="summary-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="storageLocations">0</span>
                            <span class="stat-label">Locations</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="storageUtilized">0%</span>
                            <span class="stat-label">Utilized</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="storageAlerts">0</span>
                            <span class="stat-label">Alerts</span>
                        </div>
                    </div>
                    <div class="summary-actions">
                        <button class="btn btn-warning btn-sm w-100" onclick="showStorageMap()">Storage Map</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="vault-activity-section">
            <h6 class="section-title"><i class="fas fa-history"></i> Recent Activity</h6>
            <div id="recentActivity" class="activity-list">
                <div class="activity-item">
                    <i class="fas fa-clock"></i>
                    <span>Recent activity will appear here</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Cards Tab -->
    <div class="tab-pane fade" id="cards" role="tabpanel">
        <div class="vault-section-header">
            <div class="section-nav">
                <button class="nav-btn active" onclick="setCardView('franchise')">
                    <i class="fas fa-building"></i> By Franchise
                </button>
                <button class="nav-btn" onclick="setCardView('set')">
                    <i class="fas fa-layer-group"></i> By Set
                </button>
                <button class="nav-btn" onclick="setCardView('status')">
                    <i class="fas fa-tag"></i> By Status
                </button>
                <button class="nav-btn" onclick="setCardView('storage')">
                    <i class="fas fa-map-marker-alt"></i> By Storage
                </button>
            </div>
            <div class="section-actions">
                <a href="{{ url_for('cards.vault_cards') }}" class="btn btn-primary btn-sm">
                    <i class="fas fa-external-link-alt"></i> Full Cards View
                </a>
            </div>
        </div>
        <div id="cardsOverview" class="vault-grid">
            <!-- Cards will be loaded here -->
            <div class="empty-state">
                <i class="fas fa-id-card"></i>
                <h6>No cards in vault</h6>
                <a href="{{ url_for('create_listing') }}" class="btn btn-primary">Add Cards</a>
            </div>
        </div>
    </div>

    <!-- Coins Tab -->
    <div class="tab-pane fade" id="coins" role="tabpanel">
        <div class="vault-section-header">
            <div class="section-nav">
                <button class="nav-btn active" onclick="setCoinView('type')">
                    <i class="fas fa-coins"></i> By Type
                </button>
                <button class="nav-btn" onclick="setCoinView('year')">
                    <i class="fas fa-calendar"></i> By Year
                </button>
                <button class="nav-btn" onclick="setCoinView('mint')">
                    <i class="fas fa-industry"></i> By Mint
                </button>
                <button class="nav-btn" onclick="setCoinView('grade')">
                    <i class="fas fa-star"></i> By Grade
                </button>
                <button class="nav-btn" onclick="setCoinView('storage')">
                    <i class="fas fa-warehouse"></i> By Storage
                </button>
            </div>
            <div class="section-actions">
                <a href="{{ url_for('cards.vault_coins') }}" class="btn btn-success btn-sm">
                    <i class="fas fa-external-link-alt"></i> Full Coins View
                </a>
            </div>
        </div>
        <div id="coinsOverview" class="vault-table-container">
            <!-- Coins table will be loaded here -->
            <div class="empty-state">
                <i class="fas fa-coins"></i>
                <h6>No coins in vault</h6>
                <button class="btn btn-success" disabled>Add Coins (Coming Soon)</button>
            </div>
        </div>
    </div>

    <!-- Collectibles Tab (Future) -->
    <div class="tab-pane fade" id="collectibles" role="tabpanel">
        <div class="coming-soon">
            <i class="fas fa-tools"></i>
            <h4>Other Collectibles</h4>
            <p>Funko Pop!, Tech Decks, Promotional items, and more coming soon.</p>
        </div>
    </div>
</div>

<!-- Import Modal -->
<div class="modal fade" id="importModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Import to Vault</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Import Type</label>
                    <select class="form-select" id="importType">
                        <option value="cards">Cards (CSV)</option>
                        <option value="coins">Coins (CSV)</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Select File</label>
                    <input type="file" class="form-control" id="importFile" accept=".csv">
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="overwriteExisting">
                    <label class="form-check-label">
                        Overwrite existing items
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="processImport()">Import</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
let currentCardView = 'franchise';
let currentCoinView = 'type';

document.addEventListener('DOMContentLoaded', function() {
    loadVaultStats();
    loadVaultOverview();
});

async function loadVaultStats() {
    try {
        const response = await fetch('/api/vault/stats');
        const data = await response.json();

        if (data.success) {
            const stats = data.stats;
            document.getElementById('totalItems').textContent = `${stats.total_items || 0} items`;
            document.getElementById('cardsTotal').textContent = stats.cards.total_cards || 0;
            document.getElementById('cardsValue').textContent = '$' + (stats.cards.total_value || 0).toFixed(0);
            document.getElementById('coinsTotal').textContent = stats.coins.total_coins || 0;
            document.getElementById('coinsValue').textContent = '$' + (stats.coins.coin_value || 0).toFixed(0);
            document.getElementById('totalValue').textContent = '$' + (stats.total_value || 0).toFixed(0);
        }
    } catch (error) {
        console.error('Failed to load vault stats:', error);
    }
}

async function loadVaultOverview() {
    // Load overview data for cards and coins tabs
    loadCardsOverview();
    loadCoinsOverview();
}

async function loadCardsOverview() {
    try {
        const response = await fetch('/api/cards/list?limit=12');
        const data = await response.json();

        if (data.success && data.cards.length > 0) {
            displayCardsOverview(data.cards);
        }
    } catch (error) {
        console.error('Failed to load cards overview:', error);
    }
}

async function loadCoinsOverview() {
    try {
        const response = await fetch('/api/coins/list?limit=10');
        const data = await response.json();

        if (data.success && data.coins.length > 0) {
            displayCoinsOverview(data.coins);
        }
    } catch (error) {
        console.error('Failed to load coins overview:', error);
    }
}

function displayCardsOverview(cards) {
    const container = document.getElementById('cardsOverview');
    container.innerHTML = '<div class="vault-grid-items"></div>';
    const grid = container.querySelector('.vault-grid-items');

    cards.slice(0, 8).forEach(card => {
        const statusClass = `status-${card.status || 'stored'}`;
        const cardHtml = `
            <div class="vault-grid-item">
                <div class="item-image">
                    ${card.photos && card.photos.length > 0 ?
                        `<img src="/${card.photos[0]}" alt="${card.title}">` :
                        `<i class="fas fa-id-card"></i>`
                    }
                </div>
                <div class="item-info">
                    <div class="item-title">${card.title}</div>
                    <div class="item-meta">
                        <span class="franchise-chip">${card.franchise || card.game_name || 'Unknown'}</span>
                        <span class="status-chip ${statusClass}">${card.status || 'stored'}</span>
                    </div>
                </div>
                <div class="item-actions">
                    <button class="action-btn" onclick="viewCard('${card.id}')">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="action-btn" onclick="editCard('${card.id}')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>
        `;
        grid.innerHTML += cardHtml;
    });

    if (cards.length > 8) {
        grid.innerHTML += `<div class="vault-grid-item more-indicator">
            <div class="more-content">
                <i class="fas fa-plus"></i>
                <span>${cards.length - 8} more</span>
            </div>
        </div>`;
    }
}

function displayCoinsOverview(coins) {
    const container = document.getElementById('coinsOverview');
    container.innerHTML = `
        <table class="vault-table">
            <thead>
                <tr>
                    <th>Coin</th>
                    <th>Year</th>
                    <th>Mint</th>
                    <th>Grade</th>
                    <th>Qty</th>
                    <th>Location</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="coinsTableBody"></tbody>
        </table>
    `;

    const tbody = document.getElementById('coinsTableBody');
    coins.forEach(coin => {
        const statusClass = `status-${coin.status || 'stored'}`;
        const rowHtml = `
            <tr>
                <td>
                    <div class="coin-cell">
                        <i class="fas fa-circle text-warning"></i>
                        <span>${coin.coin_type}</span>
                    </div>
                </td>
                <td>${coin.year}</td>
                <td>${coin.mint || '-'}</td>
                <td>${coin.grade || '-'}</td>
                <td>${coin.quantity}</td>
                <td><span class="location-chip">${coin.storage_location || '-'}</span></td>
                <td><span class="status-chip ${statusClass}">${coin.status || 'stored'}</span></td>
                <td>
                    <div class="table-actions">
                        <button class="action-btn" onclick="viewCoin('${coin.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn" onclick="editCoin('${coin.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                </td>
            </tr>
        `;
        tbody.innerHTML += rowHtml;
    });
}

function setCardView(view) {
    currentCardView = view;
    document.querySelectorAll('#cards .nav-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    loadCardsOverview();
}

function setCoinView(view) {
    currentCoinView = view;
    document.querySelectorAll('#coins .nav-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    loadCoinsOverview();
}

function showImportModal() {
    const modal = new bootstrap.Modal(document.getElementById('importModal'));
    modal.show();
}

function exportVault() {
    // Implement export functionality
    showAlert('Export functionality coming soon!', 'info');
}

function processImport() {
    // Implement import functionality
    showAlert('Import functionality coming soon!', 'info');
    const modal = bootstrap.Modal.getInstance(document.getElementById('importModal'));
    modal.hide();
}

function showStorageMap() {
    // Implement storage map
    showAlert('Storage map coming soon!', 'info');
}

function viewCard(cardId) {
    window.location.href = `/vault/cards/${cardId}`;
}

function editCard(cardId) {
    window.location.href = `/vault/cards/${cardId}/edit`;
}

function viewCoin(coinId) {
    window.location.href = `/vault/coins/${coinId}`;
}

function editCoin(coinId) {
    window.location.href = `/vault/coins/${coinId}/edit`;
}
</script>

<style>
/* Vault Operational Design Language */
.vault-header {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    padding: 16px 20px;
    margin-bottom: 16px;
}

.vault-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0;
    color: var(--text-primary);
}

.vault-subtitle {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-top: 2px;
}

.vault-stats-compact {
    display: flex;
    gap: 12px;
}

.stat-chip {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Global Controls Bar */
.vault-controls-bar {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    padding: 12px 16px;
    margin-bottom: 16px;
}

.vault-controls-bar .input-group-text {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    color: var(--text-secondary);
}

.vault-controls-bar .form-control,
.vault-controls-bar .form-select {
    border: 1px solid var(--border-primary);
    background: var(--bg-primary);
    color: var(--text-primary);
}

.vault-controls-bar .btn {
    font-size: 0.75rem;
    padding: 4px 8px;
}

/* Status Legend */
.status-legend {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

.status-chip {
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.status-stored { background: var(--cold-steel); color: white; }
.status-draft { background: #ffa726; color: white; }
.status-listed { background: #42a5f5; color: white; }
.status-sold { background: #66bb6a; color: white; }
.status-archived { background: var(--text-muted); color: white; }

/* Vault Tabs */
.vault-tabs {
    margin-bottom: 16px;
}

.vault-tab-btn {
    border: none;
    background: none;
    color: var(--text-secondary);
    padding: 8px 16px;
    font-weight: 600;
    border-radius: 6px 6px 0 0;
    transition: all 0.2s ease;
}

.vault-tab-btn.active {
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    border-bottom: 1px solid var(--bg-card);
}

.vault-tab-btn:hover:not(.active) {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

/* Vault Content */
.vault-content {
    min-height: 400px;
}

/* Summary Cards */
.vault-summary-card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    padding: 16px;
}

.summary-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
}

.summary-header i {
    color: var(--alert-crimson);
    font-size: 1.25rem;
}

.summary-header h5 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
}

.summary-stats {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
}

.stat-item {
    text-align: center;
    flex: 1;
}

.stat-number {
    display: block;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
}

.stat-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.summary-actions .btn {
    font-size: 0.75rem;
}

/* Section Headers */
.vault-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-primary);
}

.section-nav {
    display: flex;
    gap: 4px;
}

.nav-btn {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    color: var(--text-secondary);
    padding: 4px 8px;
    font-size: 0.75rem;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.nav-btn:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.nav-btn.active {
    background: var(--alert-crimson);
    border-color: var(--alert-crimson);
    color: white;
}

.section-actions .btn {
    font-size: 0.75rem;
}

/* Vault Grid */
.vault-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 8px;
}

.vault-grid-item {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: 6px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    transition: all 0.2s ease;
}

.vault-grid-item:hover {
    border-color: var(--alert-crimson);
    box-shadow: 0 2px 8px var(--shadow-primary);
}

.item-image {
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-secondary);
    border-radius: 4px;
    margin-bottom: 8px;
}

.item-image img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.item-info {
    flex: 1;
    margin-bottom: 8px;
}

.item-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.item-meta {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
}

.franchise-chip {
    background: var(--cold-steel);
    color: white;
    padding: 1px 4px;
    border-radius: 8px;
    font-size: 0.625rem;
    font-weight: 600;
}

.item-actions {
    display: flex;
    gap: 4px;
}

.action-btn {
    background: none;
    border: 1px solid var(--border-primary);
    color: var(--text-secondary);
    padding: 4px;
    border-radius: 3px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.action-btn:hover {
    background: var(--alert-crimson);
    border-color: var(--alert-crimson);
    color: white;
}

.more-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-secondary);
    border: 1px dashed var(--border-primary);
}

.more-content {
    text-align: center;
    color: var(--text-secondary);
}

.more-content i {
    display: block;
    font-size: 1.5rem;
    margin-bottom: 4px;
}

/* Vault Table */
.vault-table-container {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: 6px;
    overflow: hidden;
}

.vault-table {
    width: 100%;
    border-collapse: collapse;
}

.vault-table th {
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.025em;
    padding: 8px 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-primary);
}

.vault-table td {
    padding: 8px 12px;
    border-bottom: 1px solid var(--border-secondary);
    font-size: 0.875rem;
    color: var(--text-primary);
}

.vault-table tr:hover {
    background: var(--bg-secondary);
}

.coin-cell {
    display: flex;
    align-items: center;
    gap: 8px;
}

.location-chip {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    padding: 2px 6px;
    border-radius: 8px;
    font-size: 0.625rem;
}

.table-actions {
    display: flex;
    gap: 4px;
}

/* Activity Section */
.vault-activity-section {
    margin-top: 24px;
}

.section-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.activity-list {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: 6px;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    color: var(--text-secondary);
    border-bottom: 1px solid var(--border-secondary);
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-item i {
    color: var(--alert-crimson);
    width: 16px;
}

/* Empty States */
.empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-secondary);
}

.empty-state i {
    font-size: 2rem;
    margin-bottom: 12px;
    display: block;
}

.empty-state h6 {
    margin-bottom: 12px;
}

/* Coming Soon */
.coming-soon {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-secondary);
}

.coming-soon i {
    font-size: 3rem;
    margin-bottom: 16px;
    display: block;
}

.coming-soon h4 {
    margin-bottom: 8px;
}

/* Responsive */
@media (max-width: 768px) {
    .vault-header {
        padding: 12px 16px;
    }

    .vault-title {
        font-size: 1.25rem;
    }

    .vault-controls-bar .row > div {
        margin-bottom: 8px;
    }

    .vault-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    }

    .vault-section-header {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
    }

    .section-nav {
        justify-content: center;
    }

    .summary-stats {
        flex-direction: column;
        gap: 8px;
    }
}
</style>
{% endblock %}